import 'package:intl/intl.dart';

Map<String, Map<String, Map<String, String>>> prayerTimeBD = {
  'June': {
    '1': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '2': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '3': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '4': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '5': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '6': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '7': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '8': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '9': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '10': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '11': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '12': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '13': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '14': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '15': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '16': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '16:38',
      'Maghrib': '18:50',
      'Isha': '20:16',
    },
    '17': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '16:38',
      'Maghrib': '18:50',
      'Isha': '20:16',
    },
    '18': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '16:39',
      'Maghrib': '18:51',
      'Isha': '20:18',
    },
    '19': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '20': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '21': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '22': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '23': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '24': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '25': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '26': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '27': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '28': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '29': {
      'Shahri': '3:43',
      'Sunrise': '5:14',
      'Fajr': '3:48',
      'Dhuhr': '12:06',
      'Asr': '4:42',
      'Maghrib': '6:53',
      'Isha': '8:20',
    },
    '30': {
      'Shahri': '3:43',
      'Sunrise': '5:14',
      'Fajr': '3:48',
      'Dhuhr': '12:06',
      'Asr': '4:42',
      'Maghrib': '6:53',
      'Isha': '8:20',
    },
  },
  'August': {
    '1': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '2': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '3': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '4': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '5': {
      'Shahri': '3:39',
      'Sunrise': '5:10',
      'Fajr': '3:45',
      'Dhuhr': '12:00',
      'Asr': '4:35',
      'Maghrib': '6:46',
      'Isha': '8:11',
    },
    '6': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '7': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '8': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '9': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '10': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '11': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:01',
      'Asr': '4:36',
      'Maghrib': '6:47',
      'Isha': '8:13',
    },
    '12': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '13': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '14': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '15': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '4:38',
      'Maghrib': '6:50',
      'Isha': '8:16',
    },
    '16': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '16:38',
      'Maghrib': '18:50',
      'Isha': '20:16',
    },
    '17': {
      'Shahri': '3:38',
      'Sunrise': '5:10',
      'Fajr': '3:44',
      'Dhuhr': '12:02',
      'Asr': '16:38',
      'Maghrib': '18:50',
      'Isha': '20:16',
    },
    '18': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '16:39',
      'Maghrib': '18:51',
      'Isha': '20:18',
    },
    '19': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '20': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '21': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '22': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '23': {
      'Shahri': '3:38',
      'Sunrise': '5:11',
      'Fajr': '3:44',
      'Dhuhr': '12:03',
      'Asr': '4:39',
      'Maghrib': '6:51',
      'Isha': '8:18',
    },
    '24': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '25': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '26': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '27': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '28': {
      'Shahri': '3:39',
      'Sunrise': '5:11',
      'Fajr': '3:45',
      'Dhuhr': '12:04',
      'Asr': '4:40',
      'Maghrib': '6:53',
      'Isha': '8:19',
    },
    '29': {
      'Shahri': '3:43',
      'Sunrise': '5:14',
      'Fajr': '3:48',
      'Dhuhr': '12:06',
      'Asr': '4:42',
      'Maghrib': '6:53',
      'Isha': '8:20',
    },
    '30': {
      'Shahri': '3:43',
      'Sunrise': '5:14',
      'Fajr': '3:48',
      'Dhuhr': '12:06',
      'Asr': '4:42',
      'Maghrib': '6:53',
      'Isha': '8:20',
    },
  },
};

String addMinutesToTime(String timeString, int minutesToAdd) {
  final currentTime = DateTime.now();

  // Parse the time string and combine with the current date
  final combinedDateTime = DateFormat('yyyy-MM-dd HH:mm').parse(
      '${currentTime.year}-${currentTime.month.toString().padLeft(2, '0')}-${currentTime.day.toString().padLeft(2, '0')} $timeString');

  // Add minutes
  final updatedDateTime = combinedDateTime.add(Duration(minutes: minutesToAdd));

  // Format the updated DateTime back to the time string format
  final updatedTimeString = DateFormat('HH:mm').format(updatedDateTime);

  print('Original time: $timeString');
  print('Updated time: $updatedTimeString');
  return updatedTimeString;
}

List<String> getPrayerTiming(String month, String date, String timings) {
  // final formattedMonth = month.toLowerCase();
  var formattedMonth = month;
  if (prayerTimeBD.containsKey(formattedMonth)) {
    final monthData = prayerTimeBD[formattedMonth];

    if (monthData!.containsKey(date)) {
      final prayerTimings = monthData[date];

      if (prayerTimings!.containsKey(timings)) {
        var x = prayerTimings[timings];
        // return prayerTimings[timings];

        final List<String> timingParts = x!.split(':');
        return timingParts;
      }
    }
  }

  return [];
}

// String calculateIshaJamaat(String timeString, int minutesToAdd) {

List<dynamic> calculateIshaJamaat(String timeString, int minutesToAdd) {
  List myTimes = [15, 30, 45, 60];
  List finalTimes = [];
  var hourPart = timeString.split(':')[0];
  var minutePart = timeString.split(':')[1];
  var modifiedMinute = (int.parse(minutePart) + minutesToAdd);
  var i = (modifiedMinute / 15).toInt();
  var reminder = modifiedMinute % 15;

  var prevMinute = i == 0 ? 0 : (i * 15);
  var nextMinute = i == 0 ? 15 : ((i + 1) * 15);
  print('prevMinute: ' + prevMinute.toString());
  print('nextMinute: ' + nextMinute.toString());
  print('modifiedMinute: ' + modifiedMinute.toString());
  var newMinute1 = (modifiedMinute - prevMinute).abs();
  var newMinute2 = (nextMinute - modifiedMinute).abs();
  print('new minute 1: ' + newMinute1.toString());
  print('new minute 2: ' + newMinute2.toString());
  var initialHour = hourPart;
  // if (newMinute1 < newMinute2) {
  //next difference is greater
  var prevMinute1 = prevMinute;
  if (prevMinute == 60) {
    prevMinute1 = 00;
  } else if (prevMinute > 60) {
    prevMinute1 = prevMinute - 60;
    hourPart = int.parse(hourPart) < 8
        ? (int.parse(hourPart) + 1).toString()
        : hourPart;
  }

  //Round to 8:45
  if (int.parse(hourPart) >= 8 && modifiedMinute >= 90) {
    prevMinute1 = 45;
    print("Hellloooo");
  }
  hourPart = prevMinute == 0 ? (int.parse(hourPart) + 1).toString() : hourPart;
  // End of Round to 8:45
  //next difference is greater
  print('original timee: ' + timeString);
  print('new time: ' + hourPart + ':' + prevMinute1.toString());
  //add to finalTimes array
  finalTimes.add(hourPart + ':' + prevMinute1.toString());
  // return hourPart + ':' + prevMinute.toString();
  // return finalTimes;
  // } else {
  //prev difference is greater ,we will print next minute
  var nextMinute1 = nextMinute;
  if (nextMinute == 60) {
    nextMinute1 = 0;
  } else if (nextMinute > 60) {
    nextMinute1 =
        int.parse(initialHour) < 8 && nextMinute > 60 ? nextMinute - 60 : 45;
  }
  hourPart = int.parse(initialHour) < 8
      ? (int.parse(initialHour) + 1).toString()
      : initialHour;

  //Round to 8:45
  if (int.parse(initialHour) >= 8 && modifiedMinute >= 90) {
    nextMinute1 = 45;
  }
  hourPart =
      nextMinute == 0 ? (int.parse(initialHour) + 1).toString() : initialHour;
  //End Round to 8:45
  //prev difference is greater
  print('original timed: ' + timeString);
  print('new time: ' + initialHour + ':' + nextMinute1.toString());
  //add to finalTimes array
  finalTimes.add(hourPart + ':' + nextMinute1.toString());
  // return hourPart + ':' + nextMinute.toString();
  // return finalTimes;
  // }
  return finalTimes;
}
// List<dynamic> calculateIshaJamaat(String timeString, int minutesToAdd) {
//   List myTimes = [15, 30, 45, 60];
//   List finalTimes = [];
//   var hourPart = timeString.split(':')[0];
//   var minutePart = timeString.split(':')[1];
//   var modifiedMinute = (int.parse(minutePart) + minutesToAdd);
//   var i = (modifiedMinute / 15).toInt();
//   var reminder = modifiedMinute % 15;

//   var prevMinute = i == 0 ? 0 : (i * 15);
//   var nextMinute = i == 0 ? 15 : ((i + 1) * 15);
//   print('prevMinute: ' + prevMinute.toString());
//   print('nextMinute: ' + nextMinute.toString());
//   print('modifiedMinute: ' + modifiedMinute.toString());
//   var newMinute1 = (modifiedMinute - prevMinute).abs();
//   var newMinute2 = (nextMinute - modifiedMinute).abs();
//   print('new minute 1: ' + newMinute1.toString());
//   print('new minute 2: ' + newMinute2.toString());
//   if (newMinute1 < newMinute2) {
//     //next difference is greater

//     if (prevMinute == 60) {
//       prevMinute = 00;
//     } else if (prevMinute > 60) {
//       prevMinute = prevMinute - 60;
//       hourPart = int.parse(hourPart) < 8
//           ? (int.parse(hourPart) + 1).toString()
//           : hourPart;
//     }

//     //Round to 8:45
//     if (int.parse(hourPart) >= 8 && modifiedMinute >= 90) {
//       prevMinute = 45;
//       print("Hellloooo");
//     }
//     hourPart =
//         prevMinute == 0 ? (int.parse(hourPart) + 1).toString() : hourPart;
//     // End of Round to 8:45
//     //next difference is greater
//     print('original timee: ' + timeString);
//     print('new time: ' + hourPart + ':' + prevMinute.toString());
//     //add to finalTimes array
//     finalTimes.add(hourPart + ':' + prevMinute.toString());
//     // return hourPart + ':' + prevMinute.toString();
//     // return finalTimes;
//   } else {
//     //prev difference is greater ,we will print next minute

//     if (nextMinute == 60) {
//       nextMinute = 0;
//     } else if (nextMinute > 60) {
//       nextMinute =
//           int.parse(hourPart) < 8 && nextMinute > 60 ? nextMinute - 60 : 45;
//     }
//     hourPart = int.parse(hourPart) < 8
//         ? (int.parse(hourPart) + 1).toString()
//         : hourPart;

//     //Round to 8:45
//     if (int.parse(hourPart) >= 8 && modifiedMinute >= 90) {
//       nextMinute = 45;
//     }
//     hourPart =
//         nextMinute == 0 ? (int.parse(hourPart) + 1).toString() : hourPart;
//     //End Round to 8:45
//     //prev difference is greater
//     print('original timed: ' + timeString);
//     print('new time: ' + hourPart + ':' + nextMinute.toString());
//     //add to finalTimes array
//     finalTimes.add(hourPart + ':' + nextMinute.toString());
//     // return hourPart + ':' + nextMinute.toString();
//     // return finalTimes;
//   }
//   return finalTimes;
// }
